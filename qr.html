<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="nighthunter.webmanifest">
    <link rel="shortcut icon" href="icons/moon-32.png" type="image/png">
    <link rel="stylesheet" href="css/qr.css">
    <title>NightHunter</title>
</head>
<body>
    <div id="vidio-container">
        <video id="qr-video" width="318px"></video>
    </div>
    <div id="cam-qr-result"></div>
    <script type="module">
        import QrScanner from '/js/qr-scanner/qr-scanner.min.js'; 
        const video = document.getElementById('qr-video');
        const camQrResult = document.getElementById('cam-qr-result');

        function setResult(label, result) {
            console.log(result.data);
            label.textContent = result.data;
            label.style.color = 'teal';
            scanner.stop();
        }

        const scanner = new QrScanner(video, result => setResult(camQrResult, result), {
            onDecodeError: error => {
                camQrResult.textContent = error;
                camQrResult.style.color = 'inherit';
            },
            highlightScanRegion: true,
            highlightCodeOutline: true,
        });

        scanner.start();
    </script>
</body>
</html>